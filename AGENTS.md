<!--
  READ-ONLY: This file is auto-generated by AlignTrue.
  DO NOT EDIT DIRECTLY. Changes will be overwritten.
  Edit rules in .aligntrue/rules/ instead.
-->

# Agent Rules

This file contains the canonical rules from `.aligntrue/rules/`.
AI agents should follow these guidelines.

<!-- aligntrue:rule CLAUDE.md -->

## Claude

# Exocortex Skills Ecosystem

Global instructions for Claude when working with this skills monorepo.

## ğŸ¯ Quick Reference

### Available Skills (10)

| Skill | Command | Apple Note |
|-------|---------|------------|
| ğŸ’¼ job-analyzer | `analyze: [URL]` | ğŸ“‹ Job Links Inbox |
| ğŸ¯ interview-prep | `prepare for [company]` | N/A (uses shared career data) |
| ğŸ“š reading-list | `process reading list` | ğŸ“š Reading List Inbox |
| ğŸ’¡ ideas-capture | `process ideas` | ğŸ’¡ Ideas Inbox |
| ğŸ™ï¸ voice-memos | `process voice memos` | ğŸ™ï¸ Voice Memos Inbox |
| ğŸ” local-rag | `search documents` | N/A (local files) |
| ğŸ“± social-media-post | `create [platform] post` | N/A (generates posts) |
| ğŸ³ recipe-manager | `process recipe inbox` | ğŸ³ Recipe Inbox |
| ğŸ”§ setup-manager | `check setup` | N/A (system config) |
| ğŸ­ next-skill | `create skill`, `search skills` | N/A (skill factory) |

### Key Paths

```
~/Projects/exocortex/              # This repo (code)
~/exocortex-data/                  # User data (gitignored)
```

**âš ï¸ Important**: User data path is configured in `shared/config/paths.py`. 
This is the **SINGLE SOURCE OF TRUTH** for all user data paths.

## ğŸ“ Repo Structure

```
exocortex/
â”œâ”€â”€ packages/                      # All skills (10)
â”‚   â”œâ”€â”€ job-analyzer/              # Job scoring, tracking, contacts
â”‚   â”œâ”€â”€ interview-prep/            # STAR stories, negotiation
â”‚   â”œâ”€â”€ reading-list/
â”‚   â”œâ”€â”€ ideas-capture/
â”‚   â”œâ”€â”€ voice-memos/
â”‚   â”œâ”€â”€ local-rag/
â”‚   â”œâ”€â”€ social-media-post/
â”‚   â”œâ”€â”€ recipe-manager/
â”‚   â”œâ”€â”€ setup-manager/
â”‚   â””â”€â”€ next-skill/                # Skill factory
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ scripts/                   # Release, generator, dependency tracker
â”‚   â”œâ”€â”€ config/                    # paths.py (single source of truth)
â”‚   â”œâ”€â”€ templates/                 # Patterns, templates
â”‚   â””â”€â”€ workflows/                 # Troubleshooting guides
â”œâ”€â”€ .claude/
â”‚   â””â”€â”€ commands/                  # Slash commands (/refactor, /deps, /release)
â”œâ”€â”€ .github/workflows/             # CI/CD
â”œâ”€â”€ dependencies.yaml              # File dependency graph
â”œâ”€â”€ CLAUDE.md                      # This file
â””â”€â”€ PROJECT.md                     # Roadmap & decisions
```

## ğŸ”§ Global Rules

1. **User Data**: Configured in `shared/config/paths.py` (default: `~/exocortex-data/{skill}/`)
2. **Storage Format**: YAML for structured data, Markdown for content
3. **Skill Structure**: SKILL.md <100 lines, details in `references/`
4. **Deduplication**: Always dedupe before adding items
5. **Stats Tracking**: Update stats after operations
6. **Apple Notes**: Keep processed section minimal (stats only)

## ğŸ“‹ Skill Loading

Load skill-specific SKILL.md only when needed:

```python
# Example paths
job_analyzer = "packages/job-analyzer/SKILL.md"
interview_prep = "packages/interview-prep/SKILL.md"
reading_skill = "packages/reading-list/SKILL.md"
local_rag_skill = "packages/local-rag/SKILL.md"
```

### Skill Structure Best Practice

All skills follow this structure:
```
skill-name/
â”œâ”€â”€ SKILL.md              # <100 lines, orchestrator
â”œâ”€â”€ references/           # Detailed workflows
â”‚   â””â”€â”€ workflow.md
â”œâ”€â”€ modules/              # Feature modules (on-demand)
â”œâ”€â”€ scripts/              # Python utilities
â””â”€â”€ config/               # Configuration
```

## ğŸ”„ Career Workflow (Shared Storage)

job-analyzer and interview-prep share `~/exocortex-data/career/`:

```
User: "Analyze: [URL]"           â†’ job-analyzer
User: "Prepare for [company]"   â†’ interview-prep (reads shared data)
```

## ğŸ”„ Common Workflows

### Processing Inbox (Any Skill)

1. Read Apple Note inbox
2. Parse items from pending section
3. Dedupe against existing database
4. Process each new item
5. Save to YAML database
6. Update Apple Note (processed count only)

### Release Process

```bash
cd ~/Projects/exocortex
python shared/scripts/release.py job-analyzer --patch
```

Or use `/release` command.

### Create New Skill

```bash
python shared/scripts/skill_generator.py --name "expense-tracker" --patterns inbox,database
```

## âš ï¸ Important Notes

- **Never skip failing tests** - tests must pass before releasing
- **Never commit user data** - it's in a separate gitignored folder
- **Keep SKILL.md under 100 lines** - use references/ for details
- **URL normalization** - strip trailing slashes, decode HTML entities
- **Apple Notes timeout** - keep note updates small, use stats summary

## ğŸ”„ Dependency Tracking

This repo uses a dependency graph to track relationships between files.

### Quick Commands

| Command | Description |
|---------|-------------|
| `/refactor` | Full dependency-aware refactor workflow |
| `/deps` | Quick dependency status check |
| `/release` | Trigger release workflow |

### Key Files

- `dependencies.yaml` - The dependency manifest
- `shared/scripts/dependency_tracker.py` - The tracker script

## ğŸ”— Related Files

- [PROJECT.md](docs/project-status.md) - Architecture decisions, roadmap
- [USER_GUIDE.md](docs/user-guide.md) - User documentation
- [DEVELOPER_GUIDE.md](docs/developer-guide.md) - Developer documentation

## ğŸ”„ Cross-Platform Compatibility (AlignTrue)

This repository uses AlignTrue to maintain platform-agnostic AI instructions.

**Source of Truth**: `.aligntrue/rules/CLAUDE.md`

**âš ï¸ Important**: 
- DO NOT edit `CLAUDE.md` directly - changes will be overwritten
- Edit `.aligntrue/rules/CLAUDE.md` instead
- Run `aligntrue sync` to propagate changes
